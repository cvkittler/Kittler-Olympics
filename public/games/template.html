<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Holtwood+One+SC" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=Kaushan+Script|Herr+Von+Muellerhoff" rel="stylesheet"
    type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=Istok+Web|Roboto+Condensed:700" rel="stylesheet"
    type="text/css" />
    <link rel="stylesheet" href="../loadpage/styleMain.css">

  <title id="title">TEMPLATE</title>
</head>

<body>
  <header class="hero">
    <div class="hero-wrap">
      <p class="intro" id="intro">Kittler Olympics</p>
      <h1 id="headline">TEMPLATE</h1>
      <p class="year">
        <i class="fa fa-star"></i> 2022 <i class="fa fa-star"></i>
      </p>
      <p>Sponsered by Bud Light and Tums</p>
    </div>
    <a class="game-button" href="/">
      Home
    </a>
  </header>

  <section id="bracket">
    <div class="split">
      <div class="round round-one current">
        <div class="round-details">
          Round 1
        </div>
        <ul class="matchup">
          <li class="team">
            <span class="team-top" id="spot1-1">ERROR</span>
            <input type="text" class="score" id="spot1-1-score">
          </li>
          <li class="team">
            <span class="team-bottom" id="spot1-2">ERROR</span>
            <input type="text" class="score" id="spot1-2-score">
          </li>
        </ul>
      </div>
      <!-- END ROUND ONE -->

      <div class="round round-two current">
        <div class="round-details">
          Round 2
        </div>
        <ul class="matchup">
          <li class="team">
            <span class="team-top" id="spot2-1">ERROR</span>
            <input type="text" class="score" id="spot2-1-score">
          </li>
          <li class="team">
            <span class="team-bottom" id="spot2-2">ERROR</span>
            <input type="text" class="score" id="spot2-2-score">
          </li>
        </ul>
        <ul class="matchup">
          <li class="team">
            <span class="team-top" id="spot2-3">ERROR</span>
            <input type="text" class="score" id="spot2-3-score">
          </li>
          <li class="team">
            <span class="team-bottom" id="spot2-4">ERROR</span>
            <input type="text" class="score" id="spot2-4-score">
          </li>
        </ul>
      </div>
      <!-- END ROUND TWO -->

      <div class="round round-three current">
        <div class="round-details">
          Finals
        </div>
        <ul class="matchup">
          <li class="team">
            <span class="team-top" id="spot3-1">ERROR</span>
            <input type="text" class="score" id="spot3-1-score">
          </li>
          <li class="team">
            <span class="team-bottom" id="spot3-2">ERROR</span>
            <input type="text" class="score" id="spot3-2-score">
          </li>
        </ul>
        <div class="round-details" style="margin-bottom: -150px;">
          Third Place Game
        </div>
        <ul class="matchup">
          <li class="team">
            <span class="team-top" id="spot3-3">ERROR</span>
            <input type="text" class="score" id="spot3-3-score">
          </li>
          <li class="team">
            <span class="team-bottom" id="spot3-4">ERROR</span>
            <input type="text" class="score" id="spot3-4-score">
          </li>
        </ul>
      </div>
      <!-- END ROUND THREE -->
    </div>
  </section>
  <button onclick="submitStandings()">UpdateScore</button>
</body>
<script>
  let gameName = window.location.pathname.split("/")
  fetch("../game_data/"+gameName[gameName.length-1].replace(".html",".json")).then(res => {
      return res.json();
  }).then(data =>{
      loadStandings(data);
  });

  function loadStandings(json){
    if(json["init"]){
      console.log("populating board")
    }else{
      console.log("Pick random starting positions")
      
      fetch("../loadpage/teams.json").then(res => {
          return res.json();
      }).then(teams =>{
          json = populateTeams(json,teams);
      });
    }
  }
  function fillHtml(json){
      //fill team names
      document.getElementById("spot1-1").textContent = json.play_in.team1;
      document.getElementById("spot1-2").textContent = json.play_in.team2;

      document.getElementById("spot2-1").textContent = json.game_1.team1;
      document.getElementById("spot2-2").textContent = json.game_1.team2;

      document.getElementById("spot2-3").textContent = json.game_2.team1;
      document.getElementById("spot2-4").textContent = json.game_2.team2;

      document.getElementById("spot2-1").textContent = json.finals.team1;
      document.getElementById("spot2-2").textContent = json.finals.team2;

      document.getElementById("spot2-3").textContent = json.second_place.team1;
      document.getElementById("spot2-4").textContent = json.second_place.team2;

      //scores
      document.getElementById("spot1-1-score").value = json.play_in.score1;
      document.getElementById("spot1-2-score").value = json.play_in.score2;

      document.getElementById("spot2-1-score").value = json.game_1.score1;
      document.getElementById("spot2-2-score").value = json.game_1.score2;

      document.getElementById("spot2-3-score").value = json.game_2.score1;
      document.getElementById("spot2-4-score").value = json.game_2.score2;

      document.getElementById("spot3-1-score").value = json.finals.score1;
      document.getElementById("spot3-2-score").value = json.finals.score2;

      document.getElementById("spot3-3-score").value = json.second_place.score1;
      document.getElementById("spot3-4-score").value = json.second_place.score2;
  }
  function shuffle(array) {
    for (var i = array.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = array[i];
      array[i] = array[j];
      array[j] = temp;
    }
    return array;
  }

  function populateTeams(json,teams){
    let teamList = [];
    for(let teamStr in teams){
      teamList.push(teamStr);
    }
    teamList = shuffle(teamList);
    json.play_in.team1 = teamList[0];
    json.play_in.team2 = teamList[1];
    json.game_2.team1 = teamList[2];
    json.game_2.team2 = teamList[3];
    json.game_1.team2 = teamList[4];
    return json;
  }

  function submitStandings(){
  }
</script>